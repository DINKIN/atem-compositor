<link rel="import" href="../bower_components/font-roboto/roboto.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../bower_components/polymer/lib/elements/dom-repeat.html">
<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../style/atem-controller-theme.html">
<link rel="import" href="atem-status.html">
<link rel="import" href="atem-supersource-box.html">
<link rel="import" href="atem-usk-box.html">

<dom-module id="atem-app">
	<template>
		<style include="atem-controller-theme">
			:host {
				@apply --layout-vertical;
				display: block;
				position: relative;
			}

			#boxProperties {
				@apply --layout-horizontal;
			}

			#status {
				position: absolute;
				top: 0;
				left: 0;
			}

			.box {
				margin: 0 7px;
				width: 280px;
			}

			#boxProperties > :first-child {
				margin-left: 0;
			}

			#boxProperties > :last-child {
				margin-right: 0;
			}

			atem-supersource-box:nth-of-type(1) {
				--atem-composition-box-header-color: #80A15F;
			}

			atem-supersource-box:nth-of-type(2) {
				--atem-composition-box-header-color: #5FA186;
			}

			atem-supersource-box:nth-of-type(3) {
				--atem-composition-box-header-color: #5F66A1;
			}

			atem-supersource-box:nth-of-type(4) {
				--atem-composition-box-header-color: #A15F77;
			}

			atem-usk-box {
				--atem-composition-box-header-color: #707070;
			}
		</style>

		<atem-status id="status"></atem-status>

		<h1>Hello world.</h1>

		<div id="boxProperties">
			<template is="dom-repeat" items="[[atemState.video.superSourceBoxes]]" as="boxState">
				<atem-supersource-box
					class="box"
					atem-state="[[atemState]]"
					box-id="[[index]]"
					box-state="[[boxState]]">
				</atem-supersource-box>
			</template>

			<atem-usk-box
				class="box"
				atem-state="[[atemState]]">
			</atem-usk-box>
		</div>

		<paper-dialog id="updateDialog" modal on-iron-overlay-closed="_handleUpdateDialogClosed">
			<h2>Update Available</h2>

			<p id="updateDialog-label"></p>

			<div class="buttons">
				<paper-button dialog-dismiss>No, Later</paper-button>
				<paper-button dialog-confirm autofocus>Yes, Update & Restart Now</paper-button>
			</div>
		</paper-dialog>
	</template>

	<script src="atem-app.js"></script>
</dom-module>
