<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../bower_components/paper-toggle-button/paper-toggle-button.html">
<link rel="import" href="../bower_components/web-animations-js/web-animations-next-lite.min.html">
<link rel="import" href="atem-anchor-selector.html">

<dom-module id="atem-supersource-box-properties">
	<template>
		<style include="iron-flex iron-flex-alignment">
			:host {
				@apply --layout-vertical;
				background-color: #404040;
			}

			.header {
				--paper-checkbox-checkmark-color: #797979;
				@apply --layout-center;
				@apply --layout-horizontal;
				background: #797979;
				height: 41px;
				padding: 0 14px;
			}

			.header-title {
				@apply --layout-flex;
				color: #FFFFFF;
				font-size: 18px;
				font-style: normal;
				font-weight: normal;
				line-height: normal;
				overflow: hidden;
				text-overflow: ellipsis;
			}

			#header {
				--paper-checkbox-checkmark-color: var(--atem-supersource-box-properties-header-color);
				background: var(--atem-supersource-box-properties-header-color);
			}

			#title {
				font-size: 24px;
				font-weight: 500;
			}

			#enabled {
				@apply --layout-flex-none;
				margin-left: 0.5em;
			}

			#body {
				padding: 0 14px 18px;
				@apply --layout-vertical;
			}

			#x,
			#y,
			#size {
				@apply --layout-flex;
			}

			#x {
				margin-right: 6px;
			}

			#y {
				margin: 0 6px;
			}

			#size {
				margin-left: 6px;
			}

			#sizePixels {
				bottom: -11px;
				font-size: 14px;
				opacity: 0.8;
				position: absolute;
				right: 0;
			}

			#crop {
				margin-top: 18px;
			}

			#crop-body {
				@apply --layout-center;
				@apply --layout-horizontal;
				border: 1px solid #797979;
				height: 165px;
				padding: 0 10px 5px;
			}

			#cropLeft {
				margin-right: 2px;
			}

			#cropRight {
				margin-left: 2px;
			}

			#resets {
				@apply --layout-horizontal;
				margin-top: 16px;
			}

			#resets paper-button {
				@apply --layout-flex;
				border-radius: 0;
				font-size: 18px;
				font-weight: 500;
				height: 40px;
				margin: 0 2px;
				min-width: 0;
				--paper-button: {
					background-color: #A15F5F;
					color: white;
				}
			}

			#resets paper-button:first-of-type {
				margin-left: 0;
			}

			#resets paper-button:last-of-type {
				margin-right: 0;
			}

			#resetLabel {
				font-size: 14px;
				margin-top: 6px;
				text-align: center;
			}

			atem-anchor-selector {
				margin-top: 8px;
			}
		</style>

		<div id="header" class="header">
			<div id="title" class="header-title">Box [[_addOne(boxId)]]</div>
			<paper-checkbox id="enabled" checked="[[boxState.enabled]]"></paper-checkbox>
		</div>

		<div id="body">
			<paper-dropdown-menu label="Source">
				<paper-listbox id="source" slot="dropdown-content" selected="[[boxState.source]]" on-selected-changed="take">
					<template is="dom-repeat" items="[[atemState.inputs]]" as="input">
						<paper-item>[[input.longName]]</paper-item>
					</template>
				</paper-listbox>
			</paper-dropdown-menu>

			<paper-toggle-button checked="{{usePixelValues}}">Use Pixel Values</paper-toggle-button>

			<div class="layout horizontal justified" style="position: relative;">
				<paper-input
					id="x"
					label="X"
					type="number"
					min="[[_ternary(usePixelValues, -3840, -48)]]"
					max="[[_ternary(usePixelValues, 3840, 48)]]"
					step="[[_ternary(usePixelValues, 1, 0.01)]]">
				</paper-input>

				<paper-input
					id="y"
					label="Y"
					type="number"
					min="[[_ternary(usePixelValues, -2160, -27)]]"
					max="[[_ternary(usePixelValues, 2160, 27)]]"
					step="[[_ternary(usePixelValues, 1, 0.01)]]">
				</paper-input>

				<paper-input
					id="size"
					label="Size"
					type="number"
					min="0.07"
					max="1"
					step="0.001">
				</paper-input>

				<div id="sizePixels">[[_calcSizePixels(boxState.size)]]</div>
			</div>

			<atem-anchor-selector
				x-anchor="{{xAnchor}}"
				y-anchor="{{yAnchor}}">
			</atem-anchor-selector>

			<div id="crop">
				<div class="header">
					<div class="header-title">Crop</div>
					<paper-checkbox id="cropped" checked="[[boxState.cropped]]"></paper-checkbox>
				</div>

				<div id="crop-body">
					<paper-input
						id="cropLeft"
						label="Left"
						type="number"
						min="0"
						max="32"
						step="0.01">
					</paper-input>

					<div class="layout vertical justified self-stretch" style="margin: 0 2px;">
						<paper-input
							id="cropTop"
							label="Top"
							type="number"
							min="0"
							max="18"
							step="0.01">
						</paper-input>

						<paper-input
							id="cropBottom"
							label="Bottom"
							type="number"
							min="0"
							max="18"
							step="0.01">
						</paper-input>
					</div>

					<paper-input
						id="cropRight"
						label="Right"
						type="number"
						min="0"
						max="32"
						step="0.01">
					</paper-input>
				</div>
			</div>

			<div id="resets">
				<paper-button on-tap="resetPosition">POS</paper-button>
				<paper-button on-tap="resetSize">SIZE</paper-button>
				<paper-button on-tap="resetCrop">CROP</paper-button>
				<paper-button on-tap="resetAll">ALL</paper-button>
			</div>

			<div id="resetLabel">RESET</div>
		</div>
	</template>

	<script src="atem-supersource-box-properties.js"></script>
</dom-module>
